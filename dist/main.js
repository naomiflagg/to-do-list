(()=>{"use strict";const e={tasks:[],getInput(e){const t=document.querySelector('input[name="priority"]:checked').value;return(({name:e,details:t,dueDate:s,list:a,priority:l=low})=>({name:e,details:t,dueDate:s,list:a,priority:l}))({name:e.elements[0].value,details:e.elements[1].value,dueDate:e.elements[2].value,list:e.elements[3].value,priority:t})},getIndex(e){return this.tasks.indexOf(e)},getTask(e){const t=e.dataset.value;return this.tasks[t]},addTask(e){this.tasks.push(e)},removeTask(e){const t=e.dataset.value;this.tasks.splice(t,1)},replaceTask(e,t){const s=this.getIndex(e);return this.tasks[s]=t,s}},t={lists:[],getInput:e=>e.elements[0].value,addList(e){this.lists.push(e)},listExists(e){if(this.lists.includes(e)||""===e)return!0}},s={toggleDisplay(e){e.classList.toggle("no-display")},removeDisplay(e){e.classList.add("no-display")},displayAll(){document.querySelectorAll(".task").forEach((e=>{e.classList.remove("no-display")}))},displayOnly(e){document.querySelectorAll(".task").forEach((t=>{t.classList.contains(e)?t.classList.remove("no-display"):this.removeDisplay(t)}))},filterDates(e){document.querySelectorAll(".task").forEach((t=>{t.childNodes[2].textContent===e?t.classList.remove("no-display"):this.removeDisplay(t)}))},filterLists(t){document.querySelectorAll(".task").forEach((s=>{e.getTask(s).list===t?s.classList.remove("no-display"):this.removeDisplay(s)}))},changeHeading(e){document.querySelector("h1").textContent=e},toggleStrikethrough(e){e.classList.toggle("strikethrough")},addTask(t){const s=document.createElement("tr");(()=>{const a=document.querySelector(".tasks"),l=e.getIndex(t);0===l&&(this.toggleDisplay(document.querySelector(".table-hdrs")),this.toggleDisplay(document.querySelector("h1"))),a.appendChild(s),s.classList.add(t.priority,"task"),s.dataset.value=l})(),(()=>{const e=document.createElement("td"),t=document.createElement("input");s.appendChild(e),e.appendChild(t),t.setAttribute("type","checkbox"),t.classList.add("checkbox")})(),(()=>{const e=document.createElement("td");s.appendChild(e),e.textContent=t.name,e.classList.add("task-name")})(),(()=>{const e=document.createElement("td");s.appendChild(e),e.textContent=t.dueDate})(),(()=>{const e=document.createElement("td"),t=document.createElement("i");s.appendChild(e),e.appendChild(t),t.classList.add("fas","fa-edit","edit-task")})(),(()=>{const e=document.createElement("td"),t=document.createElement("i");s.appendChild(e),e.appendChild(t),t.classList.add("fas","fa-trash-alt","delete-task")})()},addList(e){const t=document.createElement("option"),s=document.querySelector("#select-list");t.textContent=e;const a=document.querySelector("#select-list2"),l=document.createElement("option");l.textContent=e,s.appendChild(t),a.appendChild(l);const n=document.createElement("li");document.querySelector(".lists").appendChild(n),n.textContent=e,n.classList.add("list")},removeTask(e){e.remove(),this.recalibrateIndex()},recalibrateIndex(){const e=document.querySelectorAll(".task");if(e.length>0){let t=0;e.forEach((e=>{e.dataset.value=t,t++}))}else this.toggleDisplay(document.querySelector(".table-hdrs")),this.toggleDisplay(document.querySelector("h1"))},populateModal(e){document.querySelector(".task-name-modal").textContent=e.name,document.querySelector(".details-modal").textContent=e.details,document.querySelector(".due-date-modal").textContent=e.dueDate,document.querySelector(".list-modal").textContent=e.list,document.querySelector(".priority-modal").textContent=e.priority},populateForm(e){const t=document.querySelector(".new-task-form");let s=0;for(const a in e)t.elements[s].value=e[a],s++},replaceTask(e,t){const s=document.querySelector(`[data-value="${e}"]`),a=s.childNodes[1],l=s.childNodes[2];a.textContent=t.name,l.textContent=t.dueDate}};(()=>{let a;document.addEventListener("click",(l=>{const n=l.target;switch(!0){case n.classList.contains("drop-down"):s.toggleDisplay(n.lastElementChild);break;case n.classList.contains("fa-caret-down"):s.toggleDisplay(n.nextElementSibling);break;case n.classList.contains("new-task"):s.toggleDisplay(document.querySelector(".submit-task")),s.toggleDisplay(document.querySelector(".new-task-form"));break;case n.classList.contains("new-list"):s.toggleDisplay(document.querySelector(".new-list-form"));break;case n.classList.contains("submit-task-edit"):l.preventDefault();const o=document.querySelector(".new-task-form"),i=e.getInput(o),c=i.list;if(t.listExists(c)||(t.addList(c),s.addList(c)),e.tasks.includes(a)){const t=e.replaceTask(a,i);s.replaceTask(t,i)}else e.addTask(i),s.addTask(i);o.reset(),s.toggleDisplay(o),s.toggleDisplay(n);break;case n.classList.contains("submit-task"):l.preventDefault();const d=document.querySelector(".new-task-form");a=e.getInput(d);const r=a.list;t.listExists(r)||(t.addList(r),s.addList(r)),e.addTask(a),s.addTask(a),d.reset(),s.toggleDisplay(d),s.toggleDisplay(n);break;case n.classList.contains("submit-list"):l.preventDefault();const u=document.querySelector(".new-list-form"),m=t.getInput(u);t.listExists(m)||(t.addList(m),s.addList(m)),u.reset(),s.toggleDisplay(u);break;case n.classList.contains("checkbox"):s.toggleStrikethrough(n.parentNode.parentNode);break;case n.classList.contains("task-name"):const p=document.querySelector(".task-modal");a=e.getTask(n.parentNode),s.populateModal(a),s.toggleDisplay(p);break;case n.classList.contains("close"):const y=document.querySelector(".task-modal");s.toggleDisplay(y);break;case n.classList.contains("delete-task"):const k=n.parentNode.parentNode;e.removeTask(k),s.removeTask(k);break;case n.classList.contains("edit-task"):s.toggleDisplay(document.querySelector(".submit-task-edit")),s.toggleDisplay(document.querySelector(".new-task-form")),a=e.getTask(n.parentNode.parentNode),s.populateForm(a);break;case n.classList.contains("all"):s.displayAll(),s.changeHeading("All tasks");break;case n.classList.contains("high-tasks"):s.displayOnly("high"),s.changeHeading("High priority tasks");break;case n.classList.contains("low-tasks"):s.displayOnly("low"),s.changeHeading("Low priority tasks");break;case n.classList.contains("medium-tasks"):s.displayOnly("medium"),s.changeHeading("Medium priority tasks");break;case n.classList.contains("today"):const g=(new Date).toISOString().slice(0,10);s.filterDates(g),s.changeHeading("Today");break;case n.classList.contains("list"):const h=n.textContent;s.filterLists(h),s.changeHeading(h)}}))})()})();