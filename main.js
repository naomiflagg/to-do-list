(()=>{"use strict";const e={tasks:[],getInput(e){const t=document.querySelector('input[name="priority"]:checked').value;return(({name:e,details:t,dueDate:s,list:a,priority:l=low})=>({name:e,details:t,dueDate:s,list:a,priority:l}))({name:e.elements[0].value,details:e.elements[1].value,dueDate:e.elements[2].value,list:e.elements[3].value,priority:t})},getIndex(e){return this.tasks.indexOf(e)},getTask(e){const t=e.dataset.value;return this.tasks[t]},addTask(e){this.tasks.push(e)},removeTask(e){const t=e.dataset.value;this.tasks.splice(t,1)},replaceTask(e,t){const s=this.getIndex(e);return this.tasks[s]=t,s}},t={lists:[],getInput:e=>e.elements[0].value,addList(e){this.lists.push(e)},listExists(e){if(this.lists.includes(e)||""===e)return!0}},s={toggleDisplay(e){e.classList.toggle("no-display")},removeDisplay(e){e.classList.add("no-display")},displayAll(){document.querySelectorAll(".task").forEach((e=>{e.classList.remove("no-display")}))},displayOnly(e){document.querySelectorAll(".task").forEach((t=>{t.classList.contains(e)?t.classList.remove("no-display"):this.removeDisplay(t)}))},filterDates(e){document.querySelectorAll(".task").forEach((t=>{t.childNodes[2].textContent===e?t.classList.remove("no-display"):this.removeDisplay(t)}))},filterLists(t){document.querySelectorAll(".task").forEach((s=>{e.getTask(s).list===t?s.classList.remove("no-display"):this.removeDisplay(s)}))},changeHeading(e){document.querySelector("h1").textContent=e},toggleStrikethrough(e){e.classList.toggle("strikethrough")},addTask(t){const s=document.createElement("tr");(()=>{const a=document.querySelector(".tasks"),l=e.getIndex(t);0===l&&(this.toggleDisplay(document.querySelector(".table-hdrs")),this.toggleDisplay(document.querySelector("h1"))),a.appendChild(s),s.classList.add(t.priority,"task"),s.dataset.value=l})(),(()=>{const e=document.createElement("td"),t=document.createElement("input");s.appendChild(e),e.appendChild(t),t.setAttribute("type","checkbox"),t.classList.add("checkbox")})(),(()=>{const e=document.createElement("td");s.appendChild(e),e.textContent=t.name,e.classList.add("task-name")})(),(()=>{const e=document.createElement("td");s.appendChild(e),e.textContent=t.dueDate})(),(()=>{const e=document.createElement("td"),t=document.createElement("i");s.appendChild(e),e.appendChild(t),t.classList.add("fas","fa-edit","edit-task")})(),(()=>{const e=document.createElement("td"),t=document.createElement("i");s.appendChild(e),e.appendChild(t),t.classList.add("fas","fa-trash-alt","delete-task")})()},addList(e){const t=document.createElement("option"),s=document.querySelector("#select-list");t.textContent=e;const a=document.querySelector("#select-list2"),l=document.createElement("option");l.textContent=e,s.appendChild(t),a.appendChild(l);const n=document.createElement("li");document.querySelector(".lists").appendChild(n),n.textContent=e,n.classList.add("list")},removeTask(e){e.remove(),this.recalibrateIndex()},recalibrateIndex(){const e=document.querySelectorAll(".task");if(e.length>0){let t=0;e.forEach((e=>{e.dataset.value=t,t++}))}else this.toggleDisplay(document.querySelector(".table-hdrs")),this.toggleDisplay(document.querySelector("h1"))},populateModal(e){document.querySelector(".task-name-modal").textContent=e.name,document.querySelector(".details-modal").textContent=e.details,document.querySelector(".due-date-modal").textContent=e.dueDate,document.querySelector(".list-modal").textContent=e.list,document.querySelector(".priority-modal").textContent=e.priority},populateForm(e){const t=document.querySelector(".new-task-form");let s=0;for(const a in e)t.elements[s].value=e[a],s++},replaceTask(e,t){const s=document.querySelector(`[data-value="${e}"]`),a=s.childNodes[1],l=s.childNodes[2];a.textContent=t.name,l.textContent=t.dueDate}};function a(){localStorage.setItem("tasks",JSON.stringify(e.tasks))}localStorage.getItem("tasks")?(e.tasks=JSON.parse(localStorage.getItem("tasks")),e.tasks.forEach((e=>{s.addTask(e);const a=e.list;t.listExists(a)||(t.addList(a),s.addList(a))}))):e.tasks=[],(()=>{let l;document.addEventListener("click",(n=>{const o=n.target;switch(!0){case o.classList.contains("drop-down"):s.toggleDisplay(o.lastElementChild);break;case o.classList.contains("fa-caret-down"):s.toggleDisplay(o.nextElementSibling);break;case o.classList.contains("new-task"):s.toggleDisplay(document.querySelector(".submit-task")),s.toggleDisplay(document.querySelector(".new-task-form"));break;case o.classList.contains("new-list"):s.toggleDisplay(document.querySelector(".new-list-form"));break;case o.classList.contains("submit-task-edit"):n.preventDefault();const i=document.querySelector(".new-task-form"),c=e.getInput(i),d=c.list;if(t.listExists(d)||(t.addList(d),s.addList(d)),e.tasks.includes(l)){const t=e.replaceTask(l,c);s.replaceTask(t,c)}else e.addTask(c),s.addTask(c);i.reset(),a(),s.toggleDisplay(i),s.toggleDisplay(o);break;case o.classList.contains("submit-task"):n.preventDefault();const r=document.querySelector(".new-task-form");l=e.getInput(r);const u=l.list;t.listExists(u)||(t.addList(u),s.addList(u)),e.addTask(l),a(),s.addTask(l),r.reset(),s.toggleDisplay(r),s.toggleDisplay(o);break;case o.classList.contains("submit-list"):n.preventDefault();const m=document.querySelector(".new-list-form"),p=t.getInput(m);t.listExists(p)||(t.addList(p),s.addList(p)),m.reset(),s.toggleDisplay(m);break;case o.classList.contains("checkbox"):s.toggleStrikethrough(o.parentNode.parentNode);break;case o.classList.contains("task-name"):const k=document.querySelector(".task-modal");l=e.getTask(o.parentNode),s.populateModal(l),s.toggleDisplay(k);break;case o.classList.contains("close"):const g=document.querySelector(".task-modal");s.toggleDisplay(g);break;case o.classList.contains("delete-task"):const y=o.parentNode.parentNode;e.removeTask(y),s.removeTask(y);break;case o.classList.contains("edit-task"):s.toggleDisplay(document.querySelector(".submit-task-edit")),s.toggleDisplay(document.querySelector(".new-task-form")),l=e.getTask(o.parentNode.parentNode),s.populateForm(l);break;case o.classList.contains("all"):s.displayAll(),s.changeHeading("All tasks");break;case o.classList.contains("high-tasks"):s.displayOnly("high"),s.changeHeading("High priority tasks");break;case o.classList.contains("low-tasks"):s.displayOnly("low"),s.changeHeading("Low priority tasks");break;case o.classList.contains("medium-tasks"):s.displayOnly("medium"),s.changeHeading("Medium priority tasks");break;case o.classList.contains("today"):const h=(new Date).toISOString().slice(0,10);s.filterDates(h),s.changeHeading("Today");break;case o.classList.contains("list"):const L=o.textContent;s.filterLists(L),s.changeHeading(L)}}))})()})();